description "descartes-<%= @name %>"

start on runlevel [2345]
stop on starting rc RUNLEVEL=[016]

env LXC_SHUTDOWN_TIMEOUT="120"

pre-start script
    lxc-info -n <%= @name %> 2>/dev/null | grep state | grep -q "RUNNING" || lxc-start -n <%= @name %> -f <%= @config %> -d
end script

post-stop script
    lxc-shutdown -n <%= @name %> -w -t $LXC_SHUTDOWN_TIMEOUT &
    wait
end script
